@if (processando) {
   <div class="loading">Loading&#8230;</div>
}
   <div class="modal-header bg-secondary">
      <h4 class="modal-title" id="modal-basic-title">
         <i class="fa fa-id-card-o" aria-hidden="true"></i>
         - Turmas 
      </h4>
      <button type="button" class="close" aria-label="Close" (click)="activeModal.close()">
      <span aria-hidden="true">&times;</span>
      </button>
   </div>
   <div class="modal-body">
      <div class="row">
         <div class="col-md-12">
            @for (alert of alerts; track alert) {
            <ngb-alert [type]="alert.type" (closed)="closeAlert(alert)">{{ alert.message }}</ngb-alert>
            }
         </div>
      </div>
      <div class="row">
         <div class="callout callout-info">
            <div class="row g-2" >
               <div class="col-md-3">
                  <label class="form-label">Turma</label>
                  <input [(ngModel)]="turma.nome" type="text" #campoInicial class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class=" col-md-3" >
                  <label class="form-label" for="data_inicio">Tipo da Cobrança</label>
                   <select [(ngModel)]="turma.tipo_cob" type="text" class="form-control form-control-sm form-select-sm" required [disabled]="modoLeitura" >
                     <option *ngFor="let t of listaCobranca" [value]="t.id">{{ t.descricao }}</option>
                   </select>
               </div>
               <div class="col-md-2">
                  <label class="form-label">Valor Sócio</label>
                  <input [(ngModel)]="turma.vr_socio" type="text"  prefix="R$ " mask="separator,2" thousandSeparator="." [dropSpecialCharacters]="false" class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class="col-md-2">
                  <label class="form-label">Valor Não sócio</label>
                  <input [(ngModel)]="turma.vr_nao_socio" type="text" prefix="R$ " mask="separator,2" thousandSeparator="."  [dropSpecialCharacters]="false" class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class="col-md-2">
                  <label class="form-label">Status</label>
                  <div class="form-check">
                     <input class="form-check-input" type="checkbox" value="" #checkBox_estado [checked]="turma.estado == 'A'" [disabled]="modoLeitura"/>
                     <label class="form-check-label" for="flexCheckChecked">
                     Ativo 
                     </label>
                  </div>
               </div>
               <div class="col-md-6">
                  <label class="form-label">Obs</label>
                  <input [(ngModel)]="turma.obs" type="text" class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class="col-md-2">
                  <label class="form-label">Dt Inicio</label>
                  <input [(ngModel)]="turma.dt_ini" type="text" mask="d0/M0/0000" [dropSpecialCharacters]="false" class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class="col-md-2">
                  <label class="form-label">Dt Fim</label>
                  <input [(ngModel)]="turma.dt_fim" type="text" mask="d0/M0/0000" [dropSpecialCharacters]="false" class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class="col-md-2">
                  <label class="form-label">&nbsp;&nbsp;</label>
                  <div class="form-check">
                     <input class="form-check-input" type="checkbox" value="" #checkBox_flg_fim_indef [checked]="turma.flg_fim_indef == 'S'" [disabled]="modoLeitura" (change)="verificaFimTurma()" />
                     <label class="form-check-label" for="flexCheckChecked">
                     Indefinido
                     </label>
                  </div>
               </div>
               <div class="col-md-2">
                  <label class="form-label">Qtd Max. Alunos</label>
                  <input [(ngModel)]="turma.max_alunos" type="text" currency="BRL"  class="form-control form-control-sm" [disabled]="modoLeitura" />
               </div>
               <div class=" col-md-5" >
                  <label class="form-label" for="data_inicio">Cobrança</label>
                  <select [(ngModel)]="turma.idcobranca" type="text" class="form-control form-control-sm form-select-sm" required [disabled]="modoLeitura" (change)="atualizarListaCategorias()" >
                     <option *ngFor="let t of listaTipoCobranca" [value]="t.id">{{ t.descricao }}</option>
                  </select>
               </div>
               <div class=" col-md-5" >
                  <label class="form-label" for="data_inicio">Categoria</label>
                  <select [(ngModel)]="turma.idcategoria" type="text" class="form-control form-control-sm form-select-sm" required [disabled]="modoLeitura" >
                     <option *ngFor="let t of listaCategorias" [value]="t.id">{{ t.descricao }}</option>
                  </select>
               </div>

            </div>
         </div>

         <!-- TABS DETALHES-->
         <div class="callout callout-detalhes">
            <nav>
               <div class="nav nav-tabs" id="nav-tab" role="tablist">
                  <button class="nav-link active" id="nav-T1-tab" data-bs-toggle="tab" data-bs-target="#nav-T1" type="button" role="tab" aria-controls="nav-T1" aria-selected="true"><i class="fa fa-user"></i> - Horarios</button>
                  <button class="nav-link" id="nav-T2-tab" data-bs-toggle="tab" data-bs-target="#nav-T2" type="button" role="tab" aria-controls="nav-T2" aria-selected="false"><i class="fa fa-id-card" aria-hidden="true"></i> - Professores </button>
               </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
               <!-- HORARIOS -->
               <div class="tab-pane fade show active" id="nav-T1" role="tabpanel" aria-labelledby="nav-T1-tab">
                  <div class="row g-2 callout callout-tab">
                     HORARIOS
                  </div>
               </div>
               <!-- FIM HORARIOS -->
               <!-- DADOS PROFESSORES -->
               <div class="tab-pane fade show" id="nav-T2" role="tabpanel" aria-labelledby="nav-T2-tab">
                     <table class="table table-striped">
                        <thead>
                           <tr class="tituloTabela">
                              <th scope="col">Nome</th>
                              <th scope="col"></th>
                              <th scope="col"></th>                              
                           </tr>
                        </thead>
                        <tbody> 
                            <tr *ngFor="let a of turma.listaProfessores">
                              <td>{{a.nome}}</td>
                              <td><i>{{verificaProfessorPrincipal(a.id)}}</i></td>
                              <td>
                                 <p class="text-end icones" [hidden]="modoLeitura || id == null">
                                    <button type="button" class="btn btn-outline-primary btn-sm" [hidden]=" verificaProfessorPrincipal(a.id) != null" (click)="definirProfessorPrincipal(a)"><i class="fa fa-user" aria-hidden="true"></i></button>&nbsp;&nbsp;&nbsp;&nbsp;
                                    <button type="button" class="btn btn-outline-danger btn-sm" (click)="excluirProfessor(a)"><i class="fa fa-trash" aria-hidden="true"></i></button>
                                 </p>                                    
                              </td>

                           </tr>
                        </tbody>
                     </table>
                        <div class="col-auto me-auto"></div>
                        <div class="col-auto">
                           <a class="btn btn-outline-primary" [hidden]="modoLeitura || id == null" (click)="openModalSelecionarProfessores()">Incluir Professor</a>                                          
                        </div>
               </div>
               <!-- FIM DADOS PROFESSORES -->

            </div>
         </div>
         <!-- FIM TAB DETALHES-->
      </div>
   </div>
   <div class="modal-footer">
      <button type="button" class="btn btn-outline-danger" [hidden]="modoLeitura || id == null" (click)="excluir()">EXCLUIR</button>      
      <button type="button" class="btn btn-outline-primary" [hidden]="!modoLeitura" (click)="editar()">EDITAR</button>      
      <button type="button" class="btn btn-outline-success" [hidden]="modoLeitura" (click)="salvar()">SALVAR</button>
      <button type="button" class="btn btn-outline-secondary" (click)="activeModal.close()">SAIR</button>
   </div>
   